<div class="container mt-4">
  @if (event$ | async; as event){
  <div class="card h-100 align-items-center p-2" style="width: 100%">
    <img
      [src]="event.image"
      class="img-fluid rounded-circle me-3"
      style="width: 80px; height: 80px; object-fit: cover"
      alt="No image available"
    />
    <button class="btn btn-primary mb-2" (click)="showCalendar = !showCalendar">
      {{showCalendar ? 'Hide Calendar' : 'Show Calendar'}}
    </button>
    @if(showCalendar){
      <app-calendar></app-calendar>
    }

    <div class="card-body">
      <h5 class="card-title">{{ event.title }}</h5>
      <p class="card-text">{{ event.description }}</p>
    </div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item"><strong>Date:</strong>
      @for (date of event.date; track date; let i = $index;) {
        <li>{{ date }}</li>
      }
      </li>
      <li class="list-group-item"><strong>Location: </strong>{{ event.location }}
      </li>
      <li class="list-group-item">
        @if (users$ | async; as users){
        <strong>Participants: </strong
        >{{
          event.participants | participantEmailToName : users
        }}}
      </li>
    </ul>
    <div class="card-body">
      <button class="btn btn-danger" (click)="showDeleteModal = true">
        Remove Event
      </button>
      <button
        class="btn btn-secondary"
        [routerLink]="['/eventForm', event.id]"
        [queryParams]="{ mode: 'edit' }"
      >
        Edit Event
      </button>
    </div>
  </div>
  @if(showDeleteModal){
    <app-delete-modal
      [item]="event"
      [id]="event.id"
      (closeClick)="showDeleteModal = false"
      (deleteClick)="deleteItem(event)"
    ></app-delete-modal>

  } 
  }@else{
  <p>Loading event details...</p>
  }
</div>
