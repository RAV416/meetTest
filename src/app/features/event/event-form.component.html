<div class="container mt-5" style="max-width: 500px">
  <h2 class="mb-4 text-center">Event creator</h2>
  <form #form="ngForm" (ngSubmit)="onSubmit()">
    <app-calendar
      [id]="'date'"
      class="form-control"
      [name]="'date'"
      [(ngModel)]="model.date"
      #ngModelRef="ngModel"
      [required]="isRequired('events')"
      (dateSelected)="onDateSelected($event)"
    ></app-calendar>

    @for (event of events ; track event; let i = $index;) {
    <div class="mb-3">
      <label for="{{ event }}" class="form-label">{{
        event | titlecase
      }}</label>
      <input
        [id]="event"
        class="form-control"
        [name]="event"
        [(ngModel)]="model[event]"
        #ngModelRef="ngModel"
        [required]="isRequired(event)"
        [attr.minlength]="3"
        [attr.maxlength]="100"
        [placeholder]="
          event === 'image' ? 'Enter imageUrl' : 'Enter your ' + event
        "
      />
      @if (ngModelRef.invalid && ngModelRef.touched) {
      <div class="text-danger">{{ event | titlecase }} is required.</div>
      }
    </div>
    }
    <label class="form-label">Friends</label>
    <button type="button" class="btn btn-outline-primary w-100 mb-2" (click)="showUserModal = true">
  Select Friends
</button>
<div class="modal-backdrop fade show" *ngIf="showUserModal" style="z-index: 1040;"></div>
<div class="modal d-block" tabindex="-1" *ngIf="showUserModal" style="z-index: 1050;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Friends</h5>
        <button type="button" class="btn-close" (click)="showUserModal = false"></button>
      </div>
      <div class="modal-body">
        <ul class="list-unstyled">
          @for (user of (users$ | async); track user) {
            <li>
              <label>
                <input
                  type="checkbox"
                  [checked]="isSelected(user)"
                  (change)="toggleUser(user)"
                />
                {{ user.email }}
              </label>
            </li>
          }
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="showUserModal = false">Close</button>
      </div>
    </div>
  </div>
</div>
    <button
      type="Create event"
      class="btn btn-primary w-100"
      [disabled]="form.invalid"
    >
      Create Event
    </button>
  </form>
</div>
